<h2>Kandoro</h2>
Target:&nbsp;<input id="goal" value="30" maxlength="4" size="4"> <br/>
Hours :<input id="hours" value="12" maxlength="4" size="4">
<p id="display"></p>

<script>
var date = new Date();   

let day = date.getDate();
let month = date.getMonth() + 1;
let year = date.getFullYear();
let baseHour = date.getHours();;

const months = {
   '1':  'Jan',
   '2':  'Feb',
   '3':  'Mar',
   '4':  'Apr',
   '5':  'May',
   '6':  'Jun',
   '7':  'Jul',
   '8':  'Aug',
   '9':  'Sep',
   '10': 'Oct',
   '11': 'Nov',
   '12': 'Dec',
}

var today = months[month] + " " + day + ", " + year + " ";
var pace = 0;

var x = setInterval(function() {
  var tempHour = (parseInt(baseHour) + parseInt(document.getElementById("hours").value));
  console.log(tempHour);

  var countDownDate = new Date(today + tempHour + ":00:00").getTime();
  var total = document.getElementById("goal").value;

  var now = new Date().getTime();
  var distance = countDownDate - now;

  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
  var minutesLeft = hours * 60;
  pace = minutesLeft / total;
  
  document.getElementById("display").innerHTML = "Time: "
  document.getElementById("display").innerHTML += hours + "h " + minutes + "m " + seconds + "s ";
  document.getElementById("display").innerHTML += " <br/>Pace : " + parseFloat(pace).toFixed(2) + " min/item";
  
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("display").innerHTML = "TIME OUT!";
  }
}, 1000);
</script>

<div id="stopwatch-container">
    <h4>15min Stopwatch</h4>
    <div id="stopwatch">00:00:00</div>
    <button onclick="start(true)" id="start-btn">Start</button>
    <button onclick="pause()">Pause</button>
    <button onclick="reset()">Reset</button>
    <button onclick="done()">Done</button>
</div>
<div id="history">
    <h3>History</h3>
    <div id="executionHistory"></div>
</div>

<script>
    var stopwatch = document.getElementById("stopwatch");
    var startBtn = document.getElementById("start-btn");
    var timeoutId = null;
    var ms = 0;
    var sec = 0;
    var min = 0;
     
    function start(flag) {
        if (flag) {
            startBtn.disabled = true;
        }
     
        timeoutId = setTimeout(function() {
            ms = parseInt(ms);
            sec = parseInt(sec);
            min = parseInt(min);
     
            ms++;
     
            if (ms == 100) {
                sec = sec + 1;
                ms = 0;
            }
            if (sec == 60) {
                min = min + 1;
                sec = 0;
            }
            if (ms < 10) {
                ms = '0' + ms;
            }
            if (sec < 10) {
                sec = '0' + sec;
            }
            if (min < 10) {
                min = '0' + min;
            }
     
            stopwatch.innerHTML = min + ':' + sec + ':' + ms;
     
            start();
     
        }, 10);
    }
    
    function pause() {
        clearTimeout(timeoutId);
        startBtn.disabled = false;
    }
     
    function reset() {
        ms = 0;
        sec = 0;
        min = 0;
        clearTimeout(timeoutId);
        stopwatch.innerHTML = '00:00:00';
        startBtn.disabled = false;
    }
    
    function done() {
        var stopWatchTime = new Date("1 JAN, 2023 " + stopwatch.innerHTML).getTime();
        var paceTime      = new Date("1 JAN, 2023 " + "00:" + pace + ":00").getTime();
        var diff          = paceTime - stopWatchTime;
        var op = "";
        if (diff>=0){
            op="[+]";
        }else{
            op="[-]";
        }
        executionHistory.innerHTML += op + new Date(diff).getMinutes() + ":" +
                                           new Date(diff).getSeconds() + "<br/>"; 
    
        ms = 0;
        sec = 0;
        min = 0;
        clearTimeout(timeoutId);
        stopwatch.innerHTML = '00:00:00';
        startBtn.disabled = false;
    }
    </script>